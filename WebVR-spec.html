<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>WebVR Specification</title>

  <link rel="stylesheet" type="text/css" href="WorkingDraft.css" />
  <link rel="stylesheet" type="text/css" href="default.css" />

  <script src="jquery-1.3.2.min.js" type="text/javascript"></script>
  <script src="generateTOC.js" type="text/javascript"></script>
</head>
<body onload="generateTOC(document.getElementById('toc'))">
  <!--begin-logo-->
  <div class="head">
    <p>
      <a href="">
        <img alt="WebVR" src="WebVR-Logo.png" height=72 width=156>
      </a>
    </p>
  </div>
  <!--end-logo-->
    
  <h1>WebVR Specification</h1>
  <h2 class="no-toc">Working Draft 26 January 2014</h2>
  <dl>
    <dt>This version:
      <dd>
        <a href="https://github.com/MozVR/webvr-spec/blob/master/WebVR-spec.html">
          https://github.com/MozVR/webvr-spec/blob/master/WebVR-spec.html
        </a>
        <br>
        <a href="https://github.com/MozVR/webvr-spec/blob/master/webvr.idl">
          <b>WebIDL:</b> https://github.com/MozVR/webvr-spec/blob/master/webvr.idl
        </a>
      </dd>
    </dt>
    <dt>Latest version:
      <dd>
        <a href="https://github.com/MozVR/webvr-spec/blob/master/WebVR-spec.html">
          https://github.com/MozVR/webvr-spec/blob/master/WebVR-spec.html
        </a>
        <br>
        <a href="https://github.com/MozVR/webvr-spec/blob/master/webvr.idl">
          <b>WebIDL:</b> https://github.com/MozVR/webvr-spec/blob/master/webvr.idl
        </a>
      </dd>
    </dt>
    <dt>Previous version:
      <dd>
        none
      </dd>
    </dt>

    <dt>Editor:
      <dd>
        <a href="mailto:vladimir@mozilla.com">Vladimir Vukicevic</a>
        <a href="http://www.mozilla.com/">(Mozilla Corp.)</a>
      </dd>
    </dt>
  </dl>
    
  <span style="font-size: x-small; font-style: oblique">Copyright &copy; 2014 ???</span>

  <hr />
    
  <h2 class="no-toc">Abstract</h2>
  <p>
    This specification describes support for accessing virtual reality devices, including sensors and head-mounted displays on the Web.
  </p>

  <h2 class="no-toc">Status of this document</h2>
    
  <!--begin-status-->
  <p>
    This is a working draft document and may be updated, replaced or obsoleted by other documents at any time. Do not cite this document as other than work in progress.  Public discussion of this draft specification is welcome on the (<a href="https://mail.mozilla.org/pipermail/web-vr-discuss/">archived</a>) WebVR mailing list <a href="mailto:web-vr-discuss@mozilla.org">web-vr-discuss@mozilla.org</a> (see <a href="https://mail.mozilla.org/listinfo/web-vr-discuss">instructions</a>).
  </p>
  <!--end-status-->
    
  <h2 class="no-toc">Table of contents</h2>
  <div id="toc"></div>

  <h2>Introduction</h2>
  <div class="note">        
    <p>
      Some introductory notes about WebVR here.
    </p>
  </div>

<!-- ======================================================================================================= -->

  <h2>Supported Device Types</h2>

  <p>
    ...
  </p>
    

<!-- ======================================================================================================= -->

  <h2>Security</h2>

  <p> 
  </p>

<!-- ======================================================================================================= -->

  <h2>DOM Interfaces</h2>

  <p>
    This section describes the interfaces and functionality added to the DOM to support runtime access to the functionality described above.
  </p>

<!-- ======================================================================================================= -->

  <h3>Types</h3>

  <p>
    The following types are used in all interfaces in the following section.
  </p>
  <pre class="idl">
enum VREye { "left", "right" };
  </pre>

<!-- ======================================================================================================= -->

  <h3><a name="VRFIELDOFVIEW">VRFieldOfView</a></h3>

  <p>
    The <code>VRFieldOfView</code> interface represents a field of view, as given by 4 degrees describing the view from a center point.
  </p>
  <pre class="idl">
interface VRFieldOfViewReadOnly {
  readonly attribute double upDegrees;
  readonly attribute double rightDegrees;
  readonly attribute double downDegrees;
  readonly attribute double leftDegrees;
};

dictionary VRFieldOfViewInit {
  double upDegrees = 0.0;
  double rightDegrees = 0.0;
  double downDegrees = 0.0;
  double leftDegrees = 0.0;
};

[Constructor(optional VRFieldOfViewInit fov),
 Constructor(double upDegrees, double rightDegrees, double downDegrees, double leftDegrees)]
interface VRFieldOfView : VRFieldOfViewReadOnly {
  inherit attribute double upDegrees;
  inherit attribute double rightDegrees;
  inherit attribute double downDegrees;
  inherit attribute double leftDegrees;
};
  </pre>

  <h4>VRFieldOfView description</h4>

  <p>
    ...
  </p>

<!-- ======================================================================================================= -->

  <h3>VRPositionState</h3>

  <p>
    The <code>VRPositionState</code> interface represents a sensor's state at a given timestamp.
  </p>

  <pre class="idl">
interface VRPositionState {
  readonly attribute double timeStamp;

  readonly attribute boolean hasPosition;
  readonly attribute DOMPoint? position;
  readonly attribute DOMPoint? linearVelocity;
  readonly attribute DOMPoint? linearAcceleration;

  readonly attribute boolean hasOrientation;
  // XXX should be DOMQuaternion as soon as we add that
  readonly attribute DOMPoint? orientation;
  readonly attribute DOMPoint? angularVelocity;
  readonly attribute DOMPoint? angularAcceleration;
};
  </pre>

<!-- ======================================================================================================= -->

  <h3 name="VRDEVICE">VRDevice</h3>

  <p>
    The <code>VRDevice</code> interface forms the base of all VR devices supported by this API.  It includes generic information such as device IDs and descriptions.
  </p>

  <pre class="id">
interface VRDevice {
  /**
   * An identifier for the distinct hardware unit that this
   * VR Device is a part of.  All VRDevice/Sensors that come
   * from the same hardware will have the same hardwareId
   */
  readonly attribute DOMString hardwareUnitId;

  /**
   * An identifier for this distinct sensor/device on a physical
   * hardware device.  This shouldn't change across browser
   * restrats, allowing configuration data to be saved based on it.
   */
  readonly attribute DOMString deviceId;

  /**
   * a device name, a user-readable name identifying it
   */
  readonly attribute DOMString deviceName;
};
  </pre>

<!-- ======================================================================================================= -->

  <h3><a name="HMDVRDEVICE">HMDVRDevice</a></h3>

  <p>
    The <code>HMDVRDevice</code> interface represents a <code>VRDevice</code> for a head-mounted display.  It contains configuration and information about the HMD.
  </p>

  <pre class="idl">
interface HMDVRDevice : VRDevice {
  /* The translation that should be applied to the view matrix for rendering each eye */
  DOMPoint getEyeTranslation(VREye whichEye);

  // the FOV that the HMD was configured with
  VRFieldOfView getCurrentEyeFieldOfView(VREye whichEye);

  // the recommended FOV, per eye.
  VRFieldOfView getRecommendedEyeFieldOfView(VREye whichEye);

  // the maximum FOV, per eye.  Above this, rendering will look broken.
  VRFieldOfView getMaximumEyeFieldOfView(VREye whichEye);

  // Set a field of view.  If either of the fields of view is null,
  // or if their values are all zeros, then the recommended field of view
  // for that eye will be used.
  void setFieldOfView(optional VRFieldOfViewInit leftFOV,
                      optional VRFieldOfViewInit rightFOV,
                      optional double zNear = 0.01,
                      optional double zFar = 10000.0);

  // return a recommended rect for this eye.  Only useful for Canvas rendering,
  // the x/y coordinates will be the location in the canvas where this eye should
  // begin, and the width/height are the dimensions.  Any canvas in the appropriate
  // ratio will work.
  DOMRect getRecommendedEyeRenderRect(VREye whichEye);
};
  </pre>

<!-- ======================================================================================================= -->

  <h3><a name="POSITIONSENSORVRDEVICE">PositionSensorVRDevice</a></h3>

  <p>
    The <code>PositionSensorVRDevice</code> interface represents a <code>VRDevice</code> for a sensor that can report position and/or orientation.
  </p>

  <pre class="idl">
interface PositionSensorVRDevice : VRDevice {
  /*
   * Return a VRPositionState dictionary containing the state of this position sensor,
   * at an optional past time or predicted for a future time if timeOffset is != 0.
   *
   * The VRPositionState will contain the position, orientation, and velocity
   * and acceleration of each of these properties.  Use "hasPosition" and "hasOrientation"
   * to check if the associated members are valid; if these are false, those members
   * will be null.
   */
  VRPositionState getState(optional double timeOffset = 0.0);

  /* Zero this sensor, treating its current position and orientation
   * as the "origin/zero" values.
   */
  void zeroSensor();
};
  </pre>

<!-- ======================================================================================================= -->

  <h2>References</h2>
  <h3>Normative references</h3>
  <dl>
    <dt id="refsRFC2119">[RFC2119]</dt>
    <dd><cite><a href="http://www.ietf.org/rfc/rfc2119.txt">
      Key words for use in RFCs to Indicate Requirement Levels</a></cite>,
      S. Bradner. IETF, March 1997.
    </dd>

    <dt id="refsWEBIDL">[WEBIDL]</dt>
    <dd><cite><a href="http://dev.w3.org/2006/webapi/WebIDL/">
      Web IDL: W3C Editorâ€™s Draft</a></cite>, 
      C. McCormack, September 2009.
    </dd>
  </dl>

  <h3>Other references</h3>

<!-- ======================================================================================================= -->
    
  <h2>Acknowledgments</h2>

</p>

</body>
</html>
